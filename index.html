<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ‰¾åˆ°ä½ çš„æƒ…ç·’åº§æ¨™ | ä½ æ˜¯å“ªç¨®æ¤ç‰©ï¼Ÿ</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
<div class="container">
    <div class="header">
        <h1>ğŸŒ¿ æ‰¾åˆ°ä½ çš„æƒ…ç·’åº§æ¨™</h1>
        <p>ç”¨æ¤ç‰©äººæ ¼ï¼Œçœ‹è¦‹ä½ ç¾åœ¨çš„èƒ½é‡èˆ‡æº«åº¦ï¼</p>
    </div>

    <div class="content">
        <!-- é–‹å§‹ç•«é¢ -->
        <div class="start-screen" id="startScreen">
            <h2>æƒ…ç·’åº§æ¨™æ¸¬é©—</h2>
            <p>
                æƒ³åƒä½ æ˜¯ä¸€æ ªæ¤ç‰©ã€‚<br>
                æœ‰ç¿’æ…£çš„æ°£å€™ã€é©åˆç”Ÿé•·çš„æº«åº¦ã€‚<br><br>
                é€é 10 å€‹ç”Ÿæ´»æƒ…å¢ƒå•é¡Œï¼Œ<br>
                æˆ‘å€‘æœƒå¹«ä½ æ‰¾åˆ°ç¾åœ¨çš„æƒ…ç·’åº§æ¨™ï¼Œ<br>
                é‚„æœ‰ç™‚ç™’èƒ½é‡ï¼Œä»¥åŠé©åˆèˆ‡ä½ ä¸€èµ·ç”Ÿæ´»çš„æ¤ç‰©å€‘ï¼
            </p>
            <button class="btn" id="startBtn">é–‹å§‹æ¸¬é©—</button>
        </div>

        <!-- æ¸¬é©—ç•«é¢ -->
        <div class="question-screen" id="questionScreen">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="question-number" id="questionNumber">å•é¡Œ 1 / 10</div>
            <div class="question-text" id="questionText"></div>
            <div class="options" id="optionsContainer"></div>
        </div>

        <!-- çµæœç•«é¢ -->
        <div class="result-screen" id="resultScreen">
            <div class="plant-icon" id="plantIcon"></div>
            <div class="plant-name" id="plantName"></div>
            <div class="plant-tagline" id="plantTagline"></div>
            <div class="description" id="plantDescription"></div>

            <div class="coord-container">
                <div class="coord-title" id="coordTitle"></div>
                <div class="coord-subtitle" id="coordSubtitle"></div>
                <div class="coord-map">
                    <div class="coord-axis vertical"></div>
                    <div class="coord-axis horizontal"></div>
                    <div class="coord-label top">Energy</div>
                    <div class="coord-label bottom">Temperature</div>
                    <div class="coord-label left"></div>
                    <div class="coord-label right"></div>
                    <div class="coord-point" id="coordPoint"></div>
                </div>
            </div>

            <div class="relation-section">
                <div class="relation-title">ğŸŒ± èˆ‡ä½ ç›¸è™•çš„æ¤ç‰©å€‘</div>
                <div class="relation-grid" id="relationGrid"></div>
            </div>

            <div class="scent-section">
                <div class="scent-title">ğŸ”® é©åˆä½ çš„é¦™æ°£èƒ½é‡</div>
                <div class="scent-grid" id="scentGrid"></div>
            </div>

            <button class="btn restart-btn" id="restartBtn">é‡æ–°æ¸¬é©—</button>
        </div>
    </div>
</div>

<script type="module">
    import { QuizManager } from './js/quiz.js';
    import { UIManager } from './js/ui.js';

    // åˆå§‹åŒ–æ‡‰ç”¨
    const quiz = new QuizManager();
    const ui = new UIManager();

    // é–‹å§‹æ¸¬é©—
    function startQuiz() {
        ui.showQuestionScreen();
        showQuestion();
    }

    // é¡¯ç¤ºé¡Œç›®
    function showQuestion() {
        const question = quiz.getCurrentQuestion();
        ui.updateQuestion(
            question,
            quiz.getCurrentQuestionNumber(),
            quiz.getTotalQuestions(),
            quiz.getProgress()
        );
        ui.renderOptions(question.options, selectAnswer);
    }

    // é¸æ“‡ç­”æ¡ˆ
    function selectAnswer(type) {
        quiz.recordAnswer(type);

        if (quiz.hasNextQuestion()) {
            setTimeout(showQuestion, 200);
        } else {
            setTimeout(showResult, 200);
        }
    }

    // é¡¯ç¤ºçµæœ
    function showResult() {
        const resultKey = quiz.calculateResult();
        ui.showResultScreen();
        ui.renderResult(resultKey);
    }

    // é‡æ–°æ¸¬é©—
    function restartQuiz() {
        quiz.reset();
        ui.showStartScreen();
    }

    // äº‹ä»¶ç›£è½
    document.getElementById('startBtn').addEventListener('click', startQuiz);
    document.getElementById('restartBtn').addEventListener('click', restartQuiz);
</script>
</body>
</html>
